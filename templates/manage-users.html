{% extends "menu.html" %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='manage-users.css') }}">
{% endblock %}

{% block content %}
<div class="manage-users-page" data-current-role="{{ user_role|lower }}">

  <!-- Header -->
  <div class="manage-header-row">
    <div>
      <h1 class="manage-title">Manage Users</h1>
    </div>

    <div class="manage-header-right">
      <div class="mini-search">
        <input type="text" id="searchUsers" placeholder="Search Users">
        <button type="button" class="search-icon-btn">üîç</button>
      </div>

      <button class="primary-btn" id="createUserBtn">+ Create New</button>
    </div>
  </div>

  <!-- Table Card -->
  <div class="card">
    <table class="user-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Role</th>
          <th class="action-header">Action</th>
        </tr>
      </thead>

      <tbody id="userTableBody">
    <!-- Rows loaded via Fetch/XHR from /api/users (manage-users.js) -->
    <tr id="noUserRow" class="no-data-row" style="display: none;">
      <td colspan="5">No Data Found</td>
    </tr>
</tbody>

    </table>

    <!-- Pagination Footer -->
    <div class="table-footer">
      <div class="entries-info">
        Showing <span id="showingCount">0</span> entries
      </div>

      <div class="pagination-controls">
        <button id="prevPage" class="pager-btn">Prev</button>

        <span id="pageInfo" class="page-info">Page 0 of 0</span>

        <button id="nextPage" class="pager-btn">Next</button>
      </div>
    </div>

  </div> <!-- End card -->

</div> <!-- End page -->


<!-- Edit User Modal -->
<div id="editUserModal" class="modal">
  <div class="modal-content">
    <h2>Edit User</h2>

  <label>Name</label>
  <input type="text" id="editName">
  <div id="editNameError" class="field-error"></div>

  <label>Email</label>
  <input type="email" id="editEmail">
  <div id="editEmailError" class="field-error"></div>

  <label>Phone</label>
  <input type="text" id="editPhone">
  <div id="editPhoneError" class="field-error"></div>

  <label>Role</label>
  <select id="editRole">
    <option value="">Select Role</option>
    <option value="Super_Admin">Super Admin</option>
    <option value="Admin">Admin</option>
    <option value="User">User</option>
  </select>
  <div id="editRoleError" class="field-error"></div>

    <div class="modal-actions">
      <button id="saveEditBtn" class="primary-btn">Save</button>
      <button id="closeEditBtn" class="cancel-btn">Cancel</button>
    </div>
  </div>
</div>

<!-- Delete User Modal -->
<div id="deleteUserModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="modal-content delete-modal" role="document">
    <h2 class="modal-title">Delete User</h2>
    <p id="deleteUserText" class="delete-text"></p>

    <div class="modal-actions">
      <button id="cancelDeleteBtn" class="cancel-btn">Cancel</button>
      <button id="confirmDeleteBtn" class="danger-btn">Delete</button>
    </div>
  </div>
</div>

{% endblock %}


{% block extra_js %}
  <script src="{{ url_for('static', filename='manage-users.js') }}"></script>
{% endblock %}
