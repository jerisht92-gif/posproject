{% extends "menu.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='new-enquiry.css') }}">

{% endblock %}

{% block content %}

<div class="container-enquiry">
    <h2 class="enquiry-title">Create New Enquiry</h2>
<form id="form-enquiry" method="POST" action="/save-enquiry" novalidate>

    <!-- ================= Create New Enquiry ================= -->
    <div class="section card">
        <div class="grid">

            <div class="form-group">
                <label>Enquiry Id (Auto Generate)</label>
                <input type="text" placeholder="Auto Generate" name="enquiry_id" value="ENQ-XXXX"  disabled>
            </div>

            <div class="form-group">
                <label>Phone Number </label>
                <input type="text" placeholder="Enter Phone Number" name="phone_number">
            </div>

            <div class="form-group">
                <label>Customer First Name </label>
                <input type="text" placeholder="First Name" name="first_name">
            </div>

            <div class="form-group">
                <label>Last Name</label>
                <input type="text" placeholder="Last Name" name="last_name">
            </div>

            <div class="form-group ">
                <label>Email </label>
                <input type="email" placeholder="Enter Email" name="email">
            </div>

        </div>
    </div>

    <!-- ================= Location ================= -->
    <h3>Location Information</h3>
    <div class="section card">
        <div class="grid">

            <div class="form-group">
                <label>Street Address </label>
                <input type="text" name="street">
            </div>

            <div class="form-group">
                <label>Apartment / Suite / Unit</label>
                <input type="text" name="unit">
            </div>

            <div class="form-group">
                <label>City </label>
                <input type="text" name="city">
            </div>

            <div class="form-group">
                <label>State / Province / Region</label>
                <input type="text" name="state">
            </div>

            <div class="form-group">
                <label>Postal / ZIP Code </label>
                <input type="text" name="zip">
            </div>

            <div class="form-group">
                <label>Country </label>
                <input type="text" name="country">
            </div>

        </div>
    </div>

    <!-- ================= Enquiry Details ================= -->
    <h3>Enquiry Details</h3>
    <div class="section card">
        <div class="grid">

            <div class="form-group">
                <label>Enquiry Type </label>
                <select name="enquiry_type">
                    <option value="">Select Enquiry Type</option>
                    <option>Product</option>
                    <option>Service</option>
                </select>
            </div>

            <div class="form-group">
                <label>Enquiry Description</label>
                <input type="text" name="enquiry_description">
            </div>

        </div>
    </div>

    <!-- ================= Source ================= -->
    <h3>Source of Enquiry</h3>
    <div class="section card">
        <div class="grid">

            <div class="form-group">
                <label>Enquiry Channels</label>
                <select name="enquiry_channel">
                    <option value="">Select Channel</option>
                    <option>Phone</option>
                    <option>Email</option>
                    <option>Web Form</option>
                    <option>Facebook</option>
                    <option>Twitter</option>
                    <option>Instagram</option>
                    <option>LinkedIn</option>

                </select>
            </div>

            <div class="form-group">
                <label>Source </label>
                <select name="source">
                    <option value="">Select Source</option>
                      <option>WebSite</option>
                    <option>Referral</option>
                    <option>Online Advertising</option>
                    <option>Offline Advertising</option>
                    <option>Facebook</option>
                    <option>Twitter</option>
                    <option>Instagram</option>
                    <option>LinkedIn</option>
                  
                </select>
            </div>

            <div class="form-group ">
                <label>How Did You Hear About This?</label>
                <select name="heard_about">
                    <option value="">Pick an Option</option>
                    <option>WebSite</option>
                    <option>Referral</option>
                    <option>Social Media</option>
                    <option>Event</option>
                    <option>Search Engine</option>
                    <option>Other</option>

                </select>
            </div>

        </div>
    </div>

    <!-- ================= Timeline ================= -->
         <h3>Timeline & Follow-Up</h3>

    <div class="section card">
        <div class="grid">

            <div class="form-group">
                <label>Urgency / Timeline</label>
                <select name="urgency">
                    <option value="">Select Urgency</option>
                    <option>Immediately</option>
                    <option>Within 1-3 months</option>
                    <option>Within 1-6 months</option>
                    <option>Just Researching</option>
                </select>
            </div>

            <div class="form-group">
                <label>Status </label>
                <select name="staus">
                    <option value="">Select Status</option>
                    <option>New </option>
                    <option>In Progress</option>
                    <option>Closed</option>

                </select>
            </div>

            <div class="form-group">
                <label>Priority</label>
                <select name="priority">
                    <option value="">Select Priority</option>
                    <option>High</option>
                    <option>Medium</option>
                    <option>Low</option>

                </select>
            </div>

        </div>
    </div>

    <!-- ================= Product Table ================= -->
     <div class="product-head" >
    <!-- <h3>Product List Items</h3> -->
    <button class="primary-btn" type="button" id="addItemBtn">+ Add New Enquiry Product</button>
    </div>
    
    <!-- ================= Buttons ================= -->
    <div class="actions">
              <button class=" btn-discard" type="button" id="cancelEnquiryBtn">Cancel</button>

        <button class="btn-discard" type="reset" id="resetEnquiryBtn">Reset</button>
<button class=" btn-save" type="submit" id="submitEnquiryBtn" disabled>
  Submit
</button>
    </div>
</form>
</div>



<!--ADD NEW PRODUCT -->
<div class="overlay" id="productModal">
  <div class="modal">
    <div class="modal-content enquiry-edit-modal" role="document">
      <h2 class="modal-title">Add New Product</h2>

      <form id="addProductForm">
        <div class="form-grid">
          <!-- Row 1 -->
          <div class="form-group">
            <label for="newProductId">Item Code</label>
            <input
              type="text"
              id="newProductId"
              name="product_id" />
            <small class="field-error error-message" id="productIdError"></small>
          </div>

          <div class="form-group">
            <label for="newProductName">Product Name</label>
            <input
              type="text"
              id="newProductName"
              name="product_name" readonly />
            <small class="field-error error-message"></small>
          </div>

          <div class="form-group">
            <label for="newProductDescription">Product Description</label>
            <input
              type="text"
              id="newProductDescription"
              name="description"
              required readonly
            />
            <small class="field-error error-message"></small>
          </div>

          <!-- Row 2 -->
          <div class="form-group">
            <label for="newUnitPrice">Cost Price</label>
            <input
              type="text"
              id="newUnitPrice"
              name="unit_price"
              required readonly
            />
            <small class="field-error error-message"></small>
          </div>

          <div class="form-group">
            <label for="newSellingPrice">Selling Price</label>
            <input
              type="text"
              id="newSellingPrice"
              name="selling_price"
              required
            />
            <small class="field-error error-message"></small>
          </div>

          <!-- Row 3 -->
          <div class="form-group">
            <label for="newQuantity">Quantity</label>
            <input
              type="text"
              id="newQuantity"
              name="quantity"
              required 
            />
            <small class="field-error error-message"></small>
          </div>

          <div class="form-group">
            <label for="newTotal">Total</label>
            <input
              type="text"
              id="newTotal"
              name="total"
              class="auto-field"
              disabled
            />
            <small class="field-error error-message"></small>
          </div>
        </div>

        <div class="modal-actions">
          <button
            type="button"
            class="cancel-btn"
  id="cancelAddItemBtn"
          >
            Cancel
          </button>
          <button
            type="submit"
            class="btn-primary"
            id="addItemSubmit" 
             onclick="addProduct(event)"
          >
            Add Item
          </button>
        </div>
      </form>
    </div>
  </div>
</div>


<!-- POP UP BEFORE FILLING ALL THE FIELDS -->
<div class="confirm-overlay" id="fillEnquiryPopup" style="display:none;">
  <div class="confirm-box">
    <h3> Enquiry Details</h3>
    <p style="margin: 10px 0 18px;">Please fill enquiry details before adding products.</p>
 <div class="confirm-actions">
      <button type="button"class="btn-save" id="fillEnquiryOkBtn" >OK </button>
    </div>
  </div>
</div>

<!-- ADD NEW COMFIRMATION EXISTING ENQUIRY DETAILS-->
<div id="emailExistsPopup" class="popup-overlay " style="display:none;">
  <div class="popup-box ">
    <h6>THIS DETAILS ALREADY EXIST<h6>
    <p style="color:#111827">This customer already has an existing enquiry. Do you want to add these products to the existing enquiry? Click OK to add, or Cancel to discard.</p>
    <div class="confirm-actions-confirm">
    <button id="emailCancelBtn"  class="btn-discard-confirm" >Cancel</button>
        <button id="emailOkBtn"  class="btn-save">OK</button>
    </div>
  </div>
</div>

{% endblock %}

{% block extra_js %}

<script src="{{ url_for('static', filename='new-enquiry.js') }}"></script>
{% endblock %}