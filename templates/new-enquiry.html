{% extends "menu.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='new-enquiry.css') }}">

{% endblock %}

{% block content %}

<div class="container-enquiry">
    <h2 class="enquiry-title">Create New Enquiry</h2>
<form id="form-enquiry" method="POST" action="/save-enquiry" novalidate>

    <!-- ================= Create New Enquiry ================= -->
    <div class="section card">
        <div class="grid">

            <div class="form-group">
                <label>Enquiry Id (Auto Generate)</label>
                <input type="text" placeholder="Auto Generate" name="enquiry_id" value="ENQ-XXXX"  disabled>
            </div>

            <div class="form-group">
                <label>Phone Number </label>
                <input type="text" placeholder="Enter Phone Number" name="phone_number">
            </div>

            <div class="form-group">
                <label>Customer First Name </label>
                <input type="text" placeholder="First Name" name="first_name">
            </div>

            <div class="form-group">
                <label>Last Name</label>
                <input type="text" placeholder="Last Name" name="last_number">
            </div>

            <div class="form-group ">
                <label>Email </label>
                <input type="email" placeholder="Enter Email" name="email">
            </div>

        </div>
    </div>

    <!-- ================= Location ================= -->
    <h3>Location Information</h3>
    <div class="section card">
        <div class="grid">

            <div class="form-group">
                <label>Street Address </label>
                <input type="text" name="street">
            </div>

            <div class="form-group">
                <label>Apartment / Suite / Unit</label>
                <input type="text" name="unit">
            </div>

            <div class="form-group">
                <label>City </label>
                <input type="text" name="city">
            </div>

            <div class="form-group">
                <label>State / Province / Region</label>
                <input type="text" name="state">
            </div>

            <div class="form-group">
                <label>Postal / ZIP Code </label>
                <input type="text" name="zip">
            </div>

            <div class="form-group">
                <label>Country </label>
                <input type="text" name="country">
            </div>

        </div>
    </div>

    <!-- ================= Enquiry Details ================= -->
    <h3>Enquiry Details</h3>
    <div class="section card">
        <div class="grid">

            <div class="form-group">
                <label>Enquiry Type </label>
                <select name="enquiry_type">
                    <option value="">Select Enquiry Type</option>
                    <option>Product</option>
                    <option>Service</option>
                </select>
            </div>

            <div class="form-group">
                <label>Enquiry Description</label>
                <input type="text" name="enquiry_description">
            </div>

        </div>
    </div>

    <!-- ================= Source ================= -->
    <h3>Source of Enquiry</h3>
    <div class="section card">
        <div class="grid">

            <div class="form-group">
                <label>Enquiry Channels</label>
                <select name="enquiry_channel">
                    <option value="">Select Channel</option>
                    <option>Phone</option>
                    <option>Email</option>
                    <option>Web Form</option>
                    <option>Facebook</option>
                    <option>Twitter</option>
                    <option>Instagram</option>
                    <option>LinkedIn</option>

                </select>
            </div>

            <div class="form-group">
                <label>Source </label>
                <select name="source">
                    <option value="">Select Source</option>
                      <option>WebSite</option>
                    <option>Referral</option>
                    <option>Online Advertising</option>
                    <option>Offline Advertising</option>
                    <option>Facebook</option>
                    <option>Twitter</option>
                    <option>Instagram</option>
                    <option>LinkedIn</option>
                  
                </select>
            </div>

            <div class="form-group ">
                <label>How Did You Hear About This?</label>
                <select name="heard_about">
                    <option value="">Pick an Option</option>
                    <option>WebSite</option>
                    <option>Referral</option>
                    <option>Social Media</option>
                    <option>Event</option>
                    <option>Search Engine</option>
                    <option>Other</option>

                </select>
            </div>

        </div>
    </div>

    <!-- ================= Timeline ================= -->
         <h3>Timeline & Follow-Up</h3>

    <div class="section card">
        <div class="grid">

            <div class="form-group">
                <label>Urgency / Timeline</label>
                <select name="urgency">
                    <option value="">Select Urgency</option>
                    <option>Immediately</option>
                    <option>Within 1-3 months</option>
                    <option>Within 1-6 months</option>
                    <option>Just Researching</option>
                </select>
            </div>

            <div class="form-group">
                <label>Status </label>
                <select name="staus">
                    <option value="">Select Status</option>
                    <option>New </option>
                    <option>In Progress</option>
                    <option>Closed</option>

                </select>
            </div>

            <div class="form-group">
                <label>Priority</label>
                <select name="priority">
                    <option value="">Select Priority</option>
                    <option>High</option>
                    <option>Medium</option>
                    <option>Low</option>

                </select>
            </div>

        </div>
    </div>

    <!-- ================= Product Table ================= -->
    <div class="product-head" >
    <h3>Product List Items</h3>
    <button class="primary-btn" type="button" id="addItemBtn">+ Add New</button>
    </div>
    
    <table>
        <thead>
            <tr>
                <th>S.No</th>
                <th>Item Code</th>
                <th>Product Description</th>
                <th>Cost Price</th>
                <th>Selling Price</th>
                <th>Quantity</th>
                <th>Total</th>
                <th>Action</th>
            </tr>
        </thead>
  <tbody id="productTableBody">
            <!-- <tr>
                <td>1</td>
                <td>PRO001</td>
                <td>Wireless Mouse</td>
                <td>₹300</td>
                <td>₹500</td>
                <td>5</td>
                <td>₹2500</td>
                <td>delete</td>
            </tr>
            <tr class="total-row">
                <td></td>
                <td></td>
                <td>Grand Total</td>
                <td></td>
                    <td></td>
                                        <td></td>

                <td>₹12000</td>
                                    <td></td>

            </tr> -->
        </tbody>
    </table>

    <!-- ================= Buttons ================= -->
    <div class="actions">
        <button class="btn btn-discard" type="reset">Reset</button>
        <button class="btn btn-save" type="submit">Submit</button>
    </div>
</form>
</div>





<div class="confirm-overlay" id="confirmOverlay">
  <div class="confirm-box">
    <h3>Confirm Save</h3>
    <p>Are you sure you want to save this customer details?</p>

    <div class="confirm-actions">
      <button type="button" class="btn-discard" id="confirmCancel">
        Cancel
      </button>
      <button type="button" class="btn-save" id="confirmOk">
        OK
      </button>
    </div>
  </div>
</div>







<!-- Overlay -->
<div class="overlay" id="productModal">
  <div class="modal">
    <div class="modal-content enquiry-edit-modal" role="document">
      <h2 class="modal-title">Add New Product</h2>

      <form id="addProductForm">
        <div class="form-grid">
          <!-- Row 1 -->
          <div class="form-group">
            <label for="newProductId">Item Code</label>
            <input
              type="text"
              id="newProductId"
              name="product_id"
              class="auto-field"
              disabled
            />
            <small class="field-error error-message"></small>
          </div>

          <div class="form-group">
            <label for="newProductDescription">Product Description</label>
            <input
              type="text"
              id="newProductDescription"
              name="description"
              required
            />
            <small class="field-error error-message"></small>
          </div>

          <!-- Row 2 -->
          <div class="form-group">
            <label for="newUnitPrice">Cost Price</label>
            <input
              type="text"
              id="newUnitPrice"
              name="unit_price"
              required
            />
            <small class="field-error error-message"></small>
          </div>

          <div class="form-group">
            <label for="newSellingPrice">Selling Price</label>
            <input
              type="text"
              id="newSellingPrice"
              name="selling_price"
              required
            />
            <small class="field-error error-message"></small>
          </div>

          <!-- Row 3 -->
          <div class="form-group">
            <label for="newQuantity">Quantity</label>
            <input
              type="text"
              id="newQuantity"
              name="quantity"
              required
            />
            <small class="field-error error-message"></small>
          </div>

          <div class="form-group">
            <label for="newTotal">Total</label>
            <input
              type="text"
              id="newTotal"
              name="total"
              class="auto-field"
              disabled
            />
            <small class="field-error error-message"></small>
          </div>
        </div>

        <div class="modal-actions">
          <button
            type="button"
            class="cancel-btn"
            onclick="closeModal('productModal')"
          >
            Cancel
          </button>
          <button
            type="submit"
            class="btn-primary"
            id="addItemSubmit"
          >
            Add Item
          </button>
        </div>
      </form>
    </div>
  </div>
</div>






<!-- Overlay1 - Edit Product Modal -->
<div class="overlay" id="productModal1">
  <div class="modal">
    <div class="modal-content enquiry-edit-modal" role="document">
      <h2 class="modal-title">Edit Product</h2>

      <form id="addProductForm1">
        <div class="form-grid">
          <!-- Row 1 -->
          <div class="form-group">
            <label for="editProductId">Item Code</label>
            <input type="text" id="editProductId" name="product_id" class="auto-field" disabled>
          </div>

          <div class="form-group">
            <label for="editProductDescription">Product Description</label>
            <input type="text" id="editProductDescription" name="description" autocomplete="off" minlength="1" maxlength="100"/>
            <small class="field-error" id="errProductDescription"></small>
          </div>

          <!-- Row 2 -->
          <div class="form-group">
            <label for="editUnitPrice">Cost Price</label>
            <input type="text" id="editUnitPrice" name="unit_price" autocomplete="off" maxlength="10"/>
            <small class="field-error" id="errUnitPrice"></small>
          </div>

          <div class="form-group">
            <label for="editSellingPrice">Selling Price</label>
            <input type="text" id="editSellingPrice" name="selling_price" autocomplete="off" maxlength="10"/>
            <small class="field-error" id="errSellingPrice"></small>
          </div>

          <!-- Row 3 -->
          <div class="form-group">
            <label for="editQuantity">Quantity</label>
            <input type="text" id="editQuantity" name="quantity" autocomplete="off" maxlength="10"/>
            <small class="field-error" id="errQuantity"></small>
          </div>

          <div class="form-group">
            <label for="editTotal">Total</label>
            <input type="text" id="editTotal" name="total" class="auto-field" disabled>
          </div>
        </div>

        <div class="modal-actions">
          <button id="saveProductEditBtn" class="btn-primary" type="button">Save</button>
          <button id="closeProductEditBtn" class="cancel-btn" type="button" onclick="closeModal()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>



<div class="confirm-overlay" id="confirmOverlay1">
  <div class="confirm-box">
    <h3>Delete Product</h3>
    <p id="deleteProductText">Are you sure you want to delete this product?</p>

    <div class="confirm-actions">
      <button type="button" class="btn-discard" id="confirmCancel1">
        Cancel
      </button>
      <button type="button" class="btn-save" id="confirmOk1">
        Delete
      </button>
    </div>
  </div>
</div>

<!-- ✅ SUCCESS POPUP MODAL (with OK button, like Customer) -->
<div id="enquirySuccessModal" class="modal">
  <div class="modal-card" style="max-width: 420px;">
    <div class="modal-body">
      <p id="enquirySuccessMessage" style="font-size: 16px; margin-bottom: 20px;"></p>
      <div style="text-align: right; margin-top: 10px;">
        <button id="enquirySuccessOkBtn" type="button" class="btn-primary">
          OK
        </button>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='new-enquiry.js') }}"></script>
{% endblock %}